# Vue3 + Spring Boot 全栈项目部署指南

## 🚀 快速开始

### 1. 运行部署脚本
双击运行 `deploy-all.bat` 或在命令行中执行：
```cmd
deploy-all.bat
```

### 2. 选择部署方式
- **首次部署**: 选择 `[1] 完整部署` - 包含完整的环境检查、项目构建和服务启动
- **日常使用**: 选择 `[2] 快速启动` - 适用于已构建过的项目

## 📋 功能菜单

### 主要功能
1. **[1] 完整部署** - 首次使用推荐
   - 环境检查（Docker、Java）
   - 项目结构验证
   - 后端Maven编译
   - 前端依赖检查
   - Docker服务构建和启动
   - 健康检查

2. **[2] 快速启动** - 日常使用
   - 直接启动已构建的服务
   - 适用于代码无变更的情况

3. **[3] 重新构建所有服务**
   - 强制重新构建Docker镜像
   - 适用于代码有重大更改

### 管理功能
4. **[4] 查看服务状态**
   - Docker容器状态
   - 资源使用情况
   - 端口占用检查

5. **[5] 查看服务日志**
   - 支持查看各个服务的运行日志
   - 便于问题排查

6. **[6] 停止所有服务**
   - 安全停止所有Docker容器

7. **[7] 清理Docker资源**
   - 清理未使用的容器、镜像、网络
   - 释放磁盘空间

### 高级功能
8. **[8] 健康检查**
   - 全面的服务连通性测试
   - API响应检查
   - 数据库连接验证

9. **[9] 数据库管理**
   - MySQL命令行连接
   - 数据库备份/恢复
   - 数据库重置

## 🌐 服务访问地址

部署完成后，您可以通过以下地址访问各个服务：

### 前端应用
- **主入口（推荐）**: http://localhost:80
- **Vue3直接访问**: http://localhost:8080

### 后端API
- **生产环境API**: http://localhost:8081
- **开发环境API**: http://localhost:8082

### 数据库
- **主机**: localhost
- **端口**: 3307 （注意不是默认的3306）
- **用户名**: root
- **密码**: root
- **数据库名**: my_blog

## 🔧 系统要求

### 必需软件
- **Docker Desktop** - 用于容器化部署
- **Java JDK 17+** - 用于后端编译
- **Windows 10/11** - 支持的操作系统

### 端口要求
确保以下端口未被占用：
- `80` - Nginx反向代理
- `8080` - 前端应用
- `8081` - 后端生产API
- `8082` - 后端开发API
- `3307` - MySQL数据库

## 🛠️ 故障排除

### 常见问题

#### 1. Docker相关
- **问题**: "Docker未安装或未启动"
- **解决**: 安装Docker Desktop并确保其正常运行

#### 2. 端口占用
- **问题**: "端口被占用"
- **解决**: 检查并停止占用端口的程序，或修改docker-compose.yml中的端口配置

#### 3. 编译失败
- **问题**: "后端编译失败"
- **解决**: 检查Java版本，确保JDK 17+已安装并配置PATH

#### 4. 服务启动失败
- **问题**: 某个服务无法启动
- **解决**: 使用菜单选项5查看具体服务日志

### 调试命令
```cmd
# 查看所有服务状态
docker compose ps

# 查看特定服务日志
docker compose logs backend
docker compose logs frontend
docker compose logs mysql

# 重启特定服务
docker compose restart backend
```

## 📚 项目结构

```
project/
├── backend/                    # Spring Boot后端
│   ├── src/main/java/         # Java源码
│   ├── src/main/resources/    # 配置文件
│   └── target/                # 编译输出
├── frontend/                  # Vue3前端
│   ├── src/                   # Vue源码
│   └── dist/                  # 构建输出
├── mysql/                     # MySQL配置
│   └── init/                  # 数据库初始化脚本
├── nginx/                     # Nginx配置
├── docker-compose.yml         # Docker编排配置
└── deploy-all.bat            # 部署脚本
```

## 🎯 默认账户

系统预置了管理员账户：
- **用户名**: admin
- **密码**: 123456

## 📞 技术支持

如果遇到问题：
1. 首先尝试使用脚本中的健康检查功能
2. 查看相关服务的日志信息
3. 检查系统要求是否满足
4. 确认网络连接正常

---

**祝您使用愉快！** 🎉